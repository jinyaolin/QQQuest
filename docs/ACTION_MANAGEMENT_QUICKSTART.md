# 動作管理快速開始

## 🚀 快速上手

### 📋 什麼是動作？

動作是可以在 Quest 設備上執行的預定義操作，例如：
- ☀️ 喚醒設備
- 😴 讓設備休眠
- 🚀 啟動應用程式
- 🛑 關閉應用程式
- 🔄 重啟應用
- ⌨️ 發送按鍵（返回、主頁等）

---

## 📝 創建第一個動作

### 步驟 1：前往動作管理

1. 啟動應用：`./run.sh`
2. 在側邊欄點擊「⚡ 動作管理」

### 步驟 2：新增動作

1. 點擊右上角「➕ 新增動作」
2. 輸入動作名稱（例如：「返回主頁」）
3. 選擇動作類型（例如：⌨️ 發送按鍵）
4. 設定參數（例如：選擇 HOME 按鍵）
5. 點擊「💾 保存」

✅ 完成！您的第一個動作已創建

---

## ⚡ 執行動作

### 方法：從動作列表執行

1. 找到您要執行的動作卡片
2. 點擊右上角的「⋮」菜單
3. 選擇「▶️ 執行」
4. 選擇目標設備
5. 點擊「▶️ 執行」

**結果**：
- ✅ 成功：顯示綠色提示
- ❌ 失敗：顯示紅色錯誤訊息
- 執行統計自動更新

---

## 📖 常用動作範例

### 1. 喚醒設備 ☀️

**用途**：喚醒休眠中的 Quest 設備

**設定**：
- 動作類型：☀️ 喚醒設備
- 參數：無需額外參數
- 建議名稱：「喚醒設備」

**執行結果**：設備螢幕亮起

---

### 2. 返回主頁 ⌨️

**用途**：返回 Quest 主頁面

**設定**：
- 動作類型：⌨️ 發送按鍵
- 按鍵：HOME (3)
- 建議名稱：「返回主頁」

**執行結果**：回到主頁面

---

### 3. 啟動應用 🚀

**用途**：啟動 Quest 上的應用程式

**設定**：
- 動作類型：🚀 執行程式
- Package：`com.android.settings` (範例：設定應用)
- Activity：`.Settings`
- 建議名稱：「開啟設定」

**如何獲取 Package 名稱？**

方法 1：查看當前運行的應用
```bash
adb shell dumpsys window | grep mCurrentFocus
```

方法 2：列出所有已安裝應用
```bash
adb shell pm list packages
```

**執行結果**：應用程式啟動

---

### 4. 關閉應用 🛑

**用途**：強制停止應用程式

**設定**：
- 動作類型：🛑 關閉程式
- Package：`com.android.settings`
- 關閉方式：force-stop
- 建議名稱：「關閉設定」

**執行結果**：應用程式關閉

---

### 5. 重啟應用 🔄

**用途**：快速重啟應用（常用於訓練重置）

**設定**：
- 動作類型：🔄 重啟應用
- Package：`com.example.training`
- Activity：`.MainActivity`
- 重啟延遲：1 秒
- 建議名稱：「重啟訓練程式」

**執行結果**：應用關閉後重新啟動

---

## 🔧 進階功能

### 複製動作

快速創建類似動作：
1. 點擊動作的「⋮」菜單
2. 選擇「📋 複製」
3. 系統自動創建副本
4. 編輯副本修改參數

### 編輯動作

修改現有動作：
1. 點擊動作的「⋮」菜單
2. 選擇「✏️ 編輯」
3. 修改名稱、參數或說明
4. 點擊「💾 保存」

### 刪除動作

移除不需要的動作：
1. 點擊動作的「⋮」菜單
2. 選擇「🗑️ 刪除」
3. 確認刪除

⚠️ **注意**：已執行的動作刪除前會顯示統計提醒

---

## 🔍 搜索和篩選

### 搜索動作

在搜索框輸入關鍵字：
- 搜索動作名稱
- 搜索動作說明

### 按類型篩選

在「類型篩選」下拉選單：
- 選擇特定動作類型
- 只顯示該類型的動作

---

## 📊 查看統計

### 整體統計

頁面頂部顯示：
- 📊 動作總數
- ⚡ 總執行次數
- ✅ 成功次數
- 📈 整體成功率

### 個別動作統計

每個動作卡片顯示：
- 執行次數
- 成功率
- 最後執行時間

---

## 💡 使用技巧

### 1. 命名規範

建議使用清楚的命名：
- ✅ 好的：「啟動訓練程式 A」
- ❌ 不好的：「動作 1」

### 2. 添加說明

為複雜動作添加說明：
```
說明：用於開始第一階段訓練，需要確保設備已喚醒
```

### 3. 分類管理

使用名稱前綴分類：
- 「[訓練] 啟動程式 A」
- 「[訓練] 關閉程式 A」
- 「[系統] 返回主頁」
- 「[系統] 喚醒設備」

### 4. 常用動作

創建常用動作集：
- 喚醒設備
- 返回主頁
- 返回上一頁（BACK 鍵）
- 降低音量
- 增加音量

---

## ⚠️ 注意事項

### 休眠動作

⚠️ **警告**：執行休眠動作後，設備可能：
- 斷開 Wi-Fi 連接
- 斷開 ADB 連接
- 需要重新喚醒才能繼續操作

### Package 名稱

- 必須是正確的格式（例如：`com.example.app`）
- 大小寫敏感
- 應用必須已安裝在設備上

### Activity 名稱

- 可以省略（使用默認 Activity）
- 使用相對名稱：`.MainActivity`
- 或完整類名：`com.example.app.MainActivity`

---

## 🚀 下一步

### 現在您可以：

1. ✅ 創建各種動作
2. ✅ 在設備上執行動作
3. ✅ 查看執行統計
4. ⏳ 等待房間管理（批量執行動作到多台設備）
5. ⏳ 等待 CUE 系統（定時執行動作）

---

## 📚 相關文件

- [功能設計](docs/ACTION_MANAGEMENT_DESIGN.md) - 詳細的技術設計
- [實現總結](docs/ACTION_MANAGEMENT_IMPLEMENTATION.md) - 完整實現文檔
- [CHANGELOG](CHANGELOG.md) - 更新日誌

---

## ❓ 常見問題

### Q: 如何知道應用的 Package 名稱？

**A**: 使用 ADB 命令：
```bash
# 查看當前運行的應用
adb shell dumpsys window | grep mCurrentFocus

# 列出所有已安裝應用
adb shell pm list packages
```

### Q: 動作執行失敗怎麼辦？

**A**: 檢查以下幾點：
1. 設備是否在線
2. Package 名稱是否正確
3. Activity 名稱格式是否正確
4. 查看執行狀態的錯誤訊息

### Q: 可以批量執行動作嗎？

**A**: 目前版本 (v0.2.0) 只能執行到單個設備。批量執行需要等待房間管理功能（v0.3.0 計劃）。

### Q: 可以定時執行動作嗎？

**A**: 目前版本不支援定時執行。此功能將在 CUE 系統中實現（v0.3.0 計劃）。

### Q: 動作的執行順序是什麼？

**A**: 單個動作立即執行。如需執行多個動作，請：
1. 逐個執行
2. 或使用「重啟應用」（自動包含關閉+啟動）
3. 等待動作鏈功能（未來版本）

---

**祝您使用愉快！** ⚡🎉

**版本**: v0.2.0  
**更新日期**: 2025-12-01




# 設備編輯功能使用說明

## ✨ 功能概述

現在可以編輯設備的基本資訊，包括：
- 📝 **設備代號（別名）**：方便識別的簡短代號（必填）
- 🏷️ **設備名稱**：完整的設備名稱（選填）
- 📋 **備註**：任何額外的說明（選填）

---

## 🎯 使用方法

### 1. **開啟編輯對話框**

1. 進入「📱 設備管理」頁面
2. 找到要編輯的設備卡片
3. 點擊設備卡片右上角的「**⋮**」選單
4. 點擊「**⚙️ 編輯設定**」

### 2. **編輯設備資訊**

編輯對話框會顯示：

```
⚙️ 編輯設備
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

設備序號: 2G97C5ZH4Z00CC

📝 基本資訊

設備代號 *
┌─────────────────────────┐
│ Q02                     │  ← 修改這裡
└─────────────────────────┘

設備名稱
┌─────────────────────────┐
│ 訓練室 A - Quest 3      │  ← 修改這裡（選填）
└─────────────────────────┘

備註
┌─────────────────────────┐
│ 主要用於新手訓練         │  ← 修改這裡（選填）
│                         │
└─────────────────────────┘

[💾 保存]  [❌ 取消]
```

### 3. **保存變更**

- 點擊「**💾 保存**」→ 保存變更並關閉對話框
- 點擊「**❌ 取消**」→ 放棄變更並關閉對話框

---

## 📋 欄位說明

### 設備代號（必填）

- **用途**：簡短的識別代號，會顯示在設備卡片標題
- **建議格式**：
  - `Q01`, `Q02`, `Q03`...（按編號）
  - `A1`, `B1`, `C1`...（按房間/區域）
  - `Training-01`, `Demo-01`...（按用途）
- **限制**：不可為空

### 設備名稱（選填）

- **用途**：完整的設備描述
- **範例**：
  - `訓練室 A - Quest 3`
  - `體驗區主機 - Quest Pro`
  - `展示用 Quest 2`
- **預設值**：如果不填，會使用「設備代號」作為名稱

### 備註（選填）

- **用途**：任何額外的說明或注意事項
- **範例**：
  - `主要用於新手訓練課程`
  - `電池續航較短，需常充電`
  - `螢幕有輕微刮痕，不影響使用`
  - `分配給 John 使用`

---

## 🔍 使用範例

### 範例 1：基本編輯

**編輯前**：
- 代號：`Device-2G97`
- 名稱：`Device-2G97`
- 備註：（空白）

**編輯後**：
- 代號：`Q01`
- 名稱：`訓練室 A - Quest 3`
- 備註：`主要用於新手訓練`

**結果**：
- 設備卡片標題顯示：`🟢 Q01`
- 卡片中顯示完整名稱和備註

---

### 範例 2：按房間/區域命名

| 設備 | 代號 | 名稱 | 備註 |
|------|------|------|------|
| Quest 1 | `A1` | `訓練室 A - Quest 3` | `新設備，電池良好` |
| Quest 2 | `A2` | `訓練室 A - Quest 2` | `舊設備，電池較弱` |
| Quest 3 | `B1` | `體驗區 - Quest Pro` | `展示用，保持清潔` |

---

### 範例 3：按用途命名

| 設備 | 代號 | 名稱 | 備註 |
|------|------|------|------|
| Quest 1 | `Training-01` | `訓練專用機 #1` | `基礎課程使用` |
| Quest 2 | `Training-02` | `訓練專用機 #2` | `進階課程使用` |
| Quest 3 | `Demo-01` | `展示專用機` | `僅供展示，不可外借` |

---

## ⚙️ 技術細節

### 資料保存

- ✅ 編輯後的資料會**立即保存**到資料庫
- ✅ 頁面會**自動刷新**顯示最新資訊
- ✅ **不影響**設備的連線狀態或其他設定

### 不可編輯的欄位

以下欄位**無法透過編輯對話框修改**：

- ❌ **設備序號（Serial）**：硬體唯一識別碼
- ❌ **IP 地址**：需透過重新連線來更新
- ❌ **連線狀態**：由系統自動管理
- ❌ **電量/溫度**：由 ADB 即時讀取

如需修改這些資訊，請使用：
- **重新連線**：更新 IP 地址和連線狀態
- **移除後重新添加**：完全重置設備資訊

---

## 💡 最佳實踐

### 1. **使用一致的命名規則**

✅ **好的做法**：
```
Q01, Q02, Q03...
A1, A2, B1, B2...
Training-01, Demo-01...
```

❌ **不建議**：
```
Quest, Quest2, q3, QUEST-04...  （不一致）
```

### 2. **設備名稱包含關鍵資訊**

✅ **好的做法**：
```
訓練室 A - Quest 3
體驗區 - Quest Pro
展示用 Quest 2
```

❌ **不建議**：
```
Quest
我的 Quest
設備1
```

### 3. **在備註中記錄重要資訊**

**建議記錄**：
- 🔋 電池狀態（如果有問題）
- 🛠️ 硬體狀況（刮痕、損壞等）
- 👤 主要使用者
- 📅 購買日期
- ⚠️ 特殊注意事項

**範例**：
```
備註：2024-01 購買，電池續航約 2 小時，
      螢幕左上角有小刮痕，主要由 John 使用
```

---

## 🔄 與其他功能的整合

### 編輯對話框的特性

1. **自動暫停刷新**：
   - 對話框開啟時，頁面不會自動刷新
   - 避免編輯到一半被打斷

2. **中央彈出**：
   - 對話框出現在頁面中央
   - 不會被自動刷新關閉

3. **即時保存**：
   - 點擊「保存」後立即更新資料庫
   - 關閉對話框後立即看到變更

---

## 📊 編輯前後對比

### UI 顯示變化

**編輯前**：
```
┌────────────┐
│ 🟢 Device  │
│   -2G97 [⋮]│
│────────────│
│Device-2G97 │
│📶 WiFi     │
│192.168.50. │
│201:5555    │
│SN: 2G97..  │
│🔋 85%      │
└────────────┘
```

**編輯後（代號：Q01，名稱：訓練室 A，備註：新設備）**：
```
┌────────────┐
│ 🟢 Q01 [⋮] │
│────────────│
│訓練室 A    │
│📶 WiFi     │
│192.168.50. │
│201:5555    │
│SN: 2G97..  │
│🔋 85%      │
│📝 備註 ▼   │
│ 新設備     │
└────────────┘
```

---

## 🐛 故障排除

### 問題 1：點擊「編輯設定」沒有反應

**可能原因**：
- 對話框已經開啟但被遮擋

**解決方法**：
- 刷新頁面
- 檢查是否有其他對話框開啟

---

### 問題 2：保存後沒有更新

**可能原因**：
- 資料庫寫入失敗

**解決方法**：
1. 查看日誌：`tail -f logs/qqquest_2025-12-01.log`
2. 檢查是否有錯誤訊息
3. 嘗試重新編輯並保存

---

### 問題 3：設備代號不可為空

**錯誤訊息**：`⚠️ 請輸入設備代號`

**解決方法**：
- 必須輸入設備代號才能保存
- 代號可以使用任何文字，建議使用簡短的識別碼

---

## 📝 相關文件

- `pages/1_📱_設備管理.py` - 編輯功能實作
- `core/device_registry.py` - 資料保存邏輯
- `core/device.py` - Device 資料模型

---

**功能狀態**：✅ 已完成
**版本**：v1.0.0
**日期**：2025-12-01


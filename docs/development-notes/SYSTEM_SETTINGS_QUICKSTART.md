# 系統設定功能 - 快速開始

## 🚀 快速使用指南

### **步驟 1：安裝依賴**

確保已安裝 Pillow（圖像處理庫）：

```bash
cd /Users/jinyaolin/QQquest
source venv/bin/activate
pip install pillow
```

或使用 `run.sh` 自動安裝所有依賴：

```bash
./run.sh
```

---

### **步驟 2：訪問系統設定頁面**

1. 啟動應用程式：`./run.sh`
2. 在瀏覽器中打開：http://localhost:8501
3. 點擊側邊欄的「⚙️ 系統設定」

---

### **步驟 3：調整 scrcpy 監看設定**

#### **常用場景設定建議**

**場景 1：高畫質監看（本地網路）**
```
視訊位元率：16M
最大畫面寬度：1920
最大幀率：60
```

**場景 2：平衡模式（預設）**
```
視訊位元率：8M
最大畫面寬度：1024
最大幀率：60
```

**場景 3：低頻寬模式（遠端或多設備）**
```
視訊位元率：2M
最大畫面寬度：720
最大幀率：30
```

#### **特殊需求設定**

**演示/教學（顯示觸控點）**：
- ✅ 勾選「顯示觸控點」

**投影展示（全螢幕）**：
- ✅ 勾選「全螢幕模式」

**節省設備電力（關閉螢幕）**：
- ✅ 勾選「關閉設備螢幕」

---

### **步驟 4：調整截圖預覽設定**

#### **設定建議**

**少量設備（1-3 台）**：
```
更新頻率：3 秒
預覽圖最大寬度：300
預覽圖最大高度：200
```

**中等數量設備（4-8 台）**：
```
更新頻率：5 秒
預覽圖最大寬度：250
預覽圖最大高度：180
```

**大量設備（9+ 台）**：
```
更新頻率：10 秒
預覽圖最大寬度：200
預覽圖最大高度：150
```

---

### **步驟 5：儲存設定**

點擊頁面底部的「💾 儲存設定」按鈕。

✅ **完成！您的自訂設定已生效。**

---

## 🧪 驗證設定

### **驗證 scrcpy 設定**

1. 前往「📱 設備管理」頁面
2. 點擊任一設備的「📺 監看設備」
3. 檢查 scrcpy 視窗是否使用您的設定

**驗證方法**：
- 查看視窗標題是否正確
- 檢查畫質是否符合預期
- 確認視窗大小/位置是否正確
- 測試觸控點顯示（如有啟用）

### **驗證截圖預覽設定**

*（待設備管理頁面整合截圖預覽功能後）*

1. 前往「📱 設備管理」頁面
2. 觀察設備卡片上的截圖預覽
3. 檢查更新頻率是否符合設定

---

## 📋 配置檔案位置

使用者設定儲存在：
```
/Users/jinyaolin/QQquest/data/user_config.json
```

**查看當前設定**：
```bash
cat /Users/jinyaolin/QQquest/data/user_config.json
```

**手動編輯設定**（不推薦，建議使用 UI）：
```bash
nano /Users/jinyaolin/QQquest/data/user_config.json
```

---

## 🔧 故障排除

### **問題：設定沒有生效**

```bash
# 檢查設定檔是否存在
ls -la /Users/jinyaolin/QQquest/data/user_config.json

# 查看設定內容
cat /Users/jinyaolin/QQquest/data/user_config.json

# 如果設定檔損壞，刪除後重新生成
rm /Users/jinyaolin/QQquest/data/user_config.json
```

### **問題：截圖功能不可用**

```bash
# 檢查 Pillow 是否安裝
python -c "import PIL; print(PIL.__version__)"

# 如果未安裝
pip install pillow
```

### **問題：scrcpy 啟動失敗**

```bash
# 檢查 scrcpy 是否安裝
scrcpy --version

# 查看應用程式日誌
tail -f /Users/jinyaolin/QQquest/logs/app.log

# 手動測試 scrcpy 命令
scrcpy -s <device_ip>:5555 -b 8M -m 1024
```

---

## 💡 進階技巧

### **1. 匯出設定為預設模板**

1. 調整好您的最佳設定
2. 前往「💾 匯入/匯出」標籤
3. 點擊「📥 下載設定檔」
4. 儲存為 `my_template.json`

**日後可快速恢復此設定！**

### **2. 為不同場景準備多組設定**

建立多個設定檔：
- `high_quality.json` - 高畫質設定
- `low_bandwidth.json` - 低頻寬設定
- `demo_mode.json` - 演示模式設定

**切換時只需匯入對應的設定檔！**

### **3. 批次修改設定（進階）**

編輯 JSON 檔案後批次套用：

```bash
# 編輯設定檔
nano /Users/jinyaolin/QQquest/data/user_config.json

# 重新啟動應用程式生效
# （或在 UI 中點擊「🔄 重新載入」）
```

---

## 📊 效能最佳化建議

### **網路頻寬有限？**

```
scrcpy 設定：
- 視訊位元率：2M
- 最大畫面寬度：720
- 最大幀率：30

截圖設定：
- 更新頻率：10 秒
- 預覽圖最大寬度：200
```

### **電腦效能較低？**

```
scrcpy 設定：
- 渲染驅動：software
- 最大畫面寬度：720
- 最大幀率：30

截圖設定：
- 更新頻率：7-10 秒
- 啟用快取：是
```

### **多設備同時監看？**

```
scrcpy 設定：
- 視訊位元率：4M
- 最大畫面寬度：720
- 視窗寬度：固定 600
- 視窗高度：固定 400
- （設定不同的視窗 X, Y 座標避免重疊）

截圖設定：
- 更新頻率：10 秒
- 預覽圖較小尺寸
```

---

## ✅ 下一步

設定完成後，您可以：

1. ✅ 前往「📱 設備管理」測試監看功能
2. ✅ 調整不同場景的最佳設定
3. ✅ 匯出常用設定作為備份
4. ⏳ 等待截圖預覽功能整合（開發中）

---

**祝您使用愉快！** 🎉

